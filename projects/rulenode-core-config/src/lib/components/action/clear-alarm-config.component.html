<section [formGroup]="clearAlarmConfigForm" fxLayout="column">
  <mat-button-toggle-group class="tb-button-toggle-group" *ngIf="mvelEnabled"
                           formControlName="scriptLang" aria-label="Script language">
    <mat-button-toggle fxFlex value="{{ scriptLanguage.MVEL }}">{{ 'rulenode.script-lang-mvel' | translate }}</mat-button-toggle>
    <mat-button-toggle fxFlex value="{{ scriptLanguage.JS }}">{{ 'rulenode.script-lang-java-script' | translate }}</mat-button-toggle>
  </mat-button-toggle-group>
  <tb-js-func *ngIf="clearAlarmConfigForm.get('scriptLang').value === scriptLanguage.JS"
              #jsFuncComponent
              formControlName="alarmDetailsBuildJs"
              functionName="Details"
              [functionArgs]="['msg', 'metadata', 'msgType']"
              helpId="rulenode/clear_alarm_node_script_fn"
              noValidate="true">
  </tb-js-func>
  <tb-js-func *ngIf="clearAlarmConfigForm.get('scriptLang').value === scriptLanguage.MVEL"
              #mvelFuncComponent
              formControlName="alarmDetailsBuildMvel"
              functionName="Details"
              [functionArgs]="['msg', 'metadata', 'msgType']"
              [disableUndefinedCheck]="true"
              helpId="rulenode/clear_alarm_node_script_fn"
              noValidate="true">
  </tb-js-func>
  <div fxLayout="row" style="padding-bottom: 16px;">
    <button mat-button mat-raised-button color="primary" (click)="testScript()">
      {{ 'tb.rulenode.test-details-function' | translate }}
    </button>
  </div>
  <mat-form-field class="mat-block" style="padding-bottom: 16px;">
    <mat-label translate>tb.rulenode.alarm-type</mat-label>
    <input required matInput formControlName="alarmType">
    <mat-error *ngIf="clearAlarmConfigForm.get('alarmType').hasError('required')">
      {{ 'tb.rulenode.alarm-type-required' | translate }}
    </mat-error>
    <mat-hint [innerHTML]="'tb.rulenode.general-pattern-hint' | translate | safeHtml"></mat-hint>
  </mat-form-field>
</section>
