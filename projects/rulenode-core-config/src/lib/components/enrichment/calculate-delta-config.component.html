<section [formGroup]="calculateDeltaConfigForm" fxLayout="column">
  <div fxLayout.gt-sm="row" fxLayoutGap.gt-sm="8px">
    <mat-form-field class="mat-block" fxFlex="100">
      <mat-label>{{ 'tb.rulenode.input-value-key' | translate }}</mat-label>
      <input matInput formControlName="inputValueKey">
      <mat-error *ngIf="calculateDeltaConfigForm.get('inputValueKey').hasError('required')">
        {{ 'tb.rulenode.input-value-key-required' | translate }}
      </mat-error>
    </mat-form-field>
    <mat-form-field class="mat-block" fxFlex="100">
      <mat-label>{{ 'tb.rulenode.output-value-key' | translate }}</mat-label>
      <input matInput formControlName="outputValueKey">
      <mat-error *ngIf="calculateDeltaConfigForm.get('outputValueKey').hasError('required')">
        {{ 'tb.rulenode.output-value-key-required' | translate }}
      </mat-error>
    </mat-form-field>
  </div>
  <mat-form-field class="mat-block" fxFlex="100">
    <mat-label>{{ 'tb.rulenode.number-of-digits-after-floating-point' | translate }}</mat-label>
    <input type="number" min="0" max="15" step="1" matInput formControlName="round">
    <mat-error *ngIf="calculateDeltaConfigForm.get('round').hasError('min')">
      {{ 'tb.rulenode.number-of-digits-after-floating-point-range' | translate }}
    </mat-error>
    <mat-error *ngIf="calculateDeltaConfigForm.get('round').hasError('max')">
      {{ 'tb.rulenode.number-of-digits-after-floating-point-range' | translate }}
    </mat-error>
  </mat-form-field>
  <tb-slide-toggle class="slide-toggle" formControlName="useCache"
                   slideToggleName="{{ 'tb.rulenode.failure-if-delta-negative' | translate }}"
                   slideToggleTooltip="{{ 'tb.rulenode.failure-if-delta-negative-tooltip' | translate}}">
  </tb-slide-toggle>
  <tb-slide-toggle class="slide-toggle" formControlName="tellFailureIfDeltaIsNegative"
                   slideToggleName="{{ 'tb.rulenode.use-cashing' | translate }}"
                   slideToggleTooltip=" {{ translate.get('tb.rulenode.use-cashing-tooltip',
            { inputValueKey: calculateDeltaConfigForm.get('inputValueKey').valid ?
            calculateDeltaConfigForm.get('inputValueKey').value : 'tb.rulenode.input-value-key' | translate }) | async }}">
  </tb-slide-toggle>
  <tb-slide-toggle class="slide-toggle" formControlName="addPeriodBetweenMsgs"
                   slideToggleName="{{ translate.get('tb.rulenode.add-time-difference-between-readings',
            { inputValueKey:  calculateDeltaConfigForm.get('inputValueKey').valid ?
            calculateDeltaConfigForm.get('inputValueKey').value : 'tb.rulenode.input-value-key' | translate }) | async }}"
                   slideToggleTooltip="{{ translate.get('tb.rulenode.add-time-difference-between-readings-tooltip',
            { periodValueKey: calculateDeltaConfigForm.get('periodValueKey').valid ?
            calculateDeltaConfigForm.get('periodValueKey').value : 'tb.rulenode.period-value-key' | translate}) | async }}">
  </tb-slide-toggle>
  <mat-form-field class="mat-block" style="margin-top: 23px;" *ngIf="calculateDeltaConfigForm.get('addPeriodBetweenMsgs').value">
    <mat-label>{{ 'tb.rulenode.period-value-key' | translate }}</mat-label>
    <input required matInput formControlName="periodValueKey">
    <mat-error *ngIf="calculateDeltaConfigForm.get('periodValueKey').hasError('required')">
      {{ 'tb.rulenode.period-value-key-required' | translate }}
    </mat-error>
  </mat-form-field>
</section>
