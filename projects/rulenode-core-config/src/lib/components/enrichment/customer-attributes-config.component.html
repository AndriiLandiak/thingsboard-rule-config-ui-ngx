<section [formGroup]="customerAttributesConfigForm" fxLayout="column">
  <tb-fieldset-component label="tb.rulenode.attr-mapping">
    <ng-template tbAppWidgetContentTemplate>
      <mat-button-toggle-group class="tb-script-lang-toggle-group"
                               style="width: 430px;"
                               formControlName="telemetry" aria-label="Script language">
        <mat-button-toggle fxFlex [value]="false">Attributes</mat-button-toggle>
        <mat-button-toggle fxFlex [value]="true">Latest telemetry</mat-button-toggle>
      </mat-button-toggle-group>
      <tb-kv-map-config
        required
        formControlName="attrMapping"
        requiredText="tb.rulenode.attr-mapping-required"
        labelText = "{{customerAttributesConfigForm.get('telemetry').value ? 'tb.rulenode.latest-telemetry-mapping' : 'tb.rulenode.attributes-mapping'}}"
        keyText="{{ customerAttributesConfigForm.get('telemetry').value ? 'tb.rulenode.source-telemetry' : 'tb.rulenode.source-attribute' }}"
        keyRequiredText="{{ customerAttributesConfigForm.get('telemetry').value ? 'tb.rulenode.source-telemetry-required' : 'tb.rulenode.source-attribute-required' }}"
        valText="tb.rulenode.target-key"
        valRequiredText="tb.rulenode.target-key-required"
        hintText="tb.rulenode.kv-map-pattern-hint">
      </tb-kv-map-config>
      <tb-msg-metadata-chip
        labelText="{{ customerAttributesConfigForm.get('telemetry').value ? 'tb.rulenode.add-mapped-latest-telemetry-to' : 'tb.rulenode.add-mapped-attribute-to' }}"
        formControlName="fetchTo"
      ></tb-msg-metadata-chip>
    </ng-template>
  </tb-fieldset-component>
</section>
