<div class="flex column gap-22"  [formGroup]="attributeControlGroup">
  <tb-example-hint [hintText]="'tb.rulenode.kv-map-pattern-hint' | translate"
                   [popupHelpLink]="popupHelpLink"></tb-example-hint>
  <tb-string-items-list subscriptSizing="dynamic"  class="mat-block" editable
                        [placeholder]="'tb.rulenode.add-attribute-key' | translate"
                        [label]="'tb.rulenode.client-attributes' | translate" formControlName="clientAttributeNames">
    <ng-container matSuffix *ngTemplateOutlet="helpIcon"></ng-container>
  </tb-string-items-list>
  <tb-string-items-list subscriptSizing="dynamic"  class="mat-block" editable
                        [placeholder]="'tb.rulenode.add-attribute-key' | translate"
                        [label]="'tb.rulenode.shared-attributes' | translate" formControlName="sharedAttributeNames">
    <ng-container matSuffix *ngTemplateOutlet="helpIcon"></ng-container>
  </tb-string-items-list>
  <tb-string-items-list subscriptSizing="dynamic" class="mat-block" editable [placeholder]="'tb.rulenode.add-attribute-key' | translate"
                        [label]="'tb.rulenode.server-attributes' | translate" formControlName="serverAttributeNames">
    <ng-container matSuffix *ngTemplateOutlet="helpIcon"></ng-container>
  </tb-string-items-list>
  <tb-string-items-list subscriptSizing="dynamic" editable class="mat-block"
                        [placeholder]="'tb.rulenode.add-telemetry-key' | translate"
                        [label]="'tb.rulenode.latest-telemetry' | translate" formControlName="latestTsKeyNames">
      <ng-container matSuffix *ngTemplateOutlet="helpIcon"></ng-container>
  </tb-string-items-list>
  <tb-slide-toggle *ngIf="attributeControlGroup.get('latestTsKeyNames').value?.length > 0"
                   formControlName="getLatestValueWithTs" defaultPadding="false"
                   [slideToggleName]="'tb.rulenode.fetch-latest-telemetry-with-timestamp' | translate"
                   [slideToggleTooltip]="'tb.rulenode.fetch-latest-telemetry-with-timestamp-tooltip' | translate:
                         { latestTsKeyName:  attributeControlGroup.get('latestTsKeyNames').value[0]}">
  </tb-slide-toggle>
</div>

<ng-template #helpIcon>
  <mat-icon class="mat-primary margin-8 cursor-pointer" aria-hidden="false" aria-label="help-icon"
            matTooltip="{{ 'tb.rulenode.chip-help' | translate }}">help</mat-icon>
</ng-template>
