<section fxLayout="column" [formGroup]="relationsQueryFormGroup">
  <tb-fieldset-component [label]="'tb.rulenode.relations-query' | translate" required="true">
    <ng-template tbAppWidgetContentTemplate>
      <div style="width: 100%;">
        <div fxLayoutGap="28px" fxLayout="row">
          <mat-form-field fxFlex="40" class="mat-block" style="min-width: 100px;">
            <mat-label translate>relation.direction</mat-label>
            <mat-select required matInput formControlName="direction">
              <mat-option *ngFor="let type of directionTypes" [value]="type">
                {{ directionTypeTranslations.get(type) | translate }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field fxFlex="60"  floatLabel="always" class="mat-block">
            <mat-label translate>tb.rulenode.max-relation-level</mat-label>
            <input matInput
                   type="number"
                   min="1"
                   step="1"
                   placeholder="{{ 'tb.rulenode.unlimited-level' | translate }}"
                   formControlName="maxLevel">
            <mat-error *ngIf="relationsQueryFormGroup.get('maxLevel').hasError('min')">
              {{ 'tb.rulenode.max-relation-level-error' | translate }}
            </mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="column">
          <tb-slide-toggle *ngIf="relationsQueryFormGroup.get('maxLevel').value > 1"
                           style="margin: 6px 0px 24px 0px;
                                  display: inline-block;"
                           formControlName="fetchLastLevelOnly"
                           [slideToggleName]="'alias.last-level-relation' | translate"
                           [slideToggleTooltip]="'tb.rulenode.last-level-relation-tooltip' | translate">
          </tb-slide-toggle>
          <label class="map-label">{{ 'relation.relation-filters' | translate}}</label>
        </div>
        <tb-relation-filters
          formControlName="filters"
        ></tb-relation-filters>
      </div>
    </ng-template>
  </tb-fieldset-component>
</section>
